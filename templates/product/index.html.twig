{% extends 'base.html.twig' %}

{% block body %}
	<h1>{{ 'app.title'|trans }}</h1>

	<div class="row">
		{% for product in products %}
			<div class="col-sm-6">
				<div class="card">
					<div class="row g-0">
						<div class="col-sm-4">
							{% if product.image is not null %}
								<img src="{{ asset('/uploads/'~ product.image) }}" alt="{{ product.name }}" class="img-fluid rounded-start" style="max-height: 300px; object-fit: contain;">
							{% endif %}
						</div>
						<div class="col-sm-8">
							<div class="card-body">
								<h5 class="card-title">{{ product.name }}</h5>
								<p class="card-text">{{ product.description }}</p>
								<p class="card-text text-primary">{{ product.price }}â‚¬</p>
								{% if product.stock > 0 %}
									<p class="card-text">{{ 'product.stock'|trans({'%nb%':product.stock}) }}</p>
								{% else %}
									<p class="card-text text-danger">{{ 'product.stock-out'|trans }}</p>
								{% endif %}
								<a href="{{ path('app_product_show', {'id': product.id}) }}" class="btn btn-primary">{{ 'app.actions.show'|trans }}</a>
								{% if is_granted('ROLE_ADMIN') %}
									<a href="{{ path('app_product_edit', {'id': product.id}) }}" class="btn btn-light">{{ 'app.actions.edit'|trans }}</a>
									<a href="{{ path('app_product_delete', {'id': product.id}) }}" class="btn btn-danger">{{ 'app.actions.delete'|trans }}</a>
								{% endif %}
							</div>
						</div>
					</div>
				</div>
			</div>
		{% else %}
			<p>{{ 'app.errors.no-items'|trans }}</p>
		{% endfor %}
	</div>

	{% if is_granted('ROLE_ADMIN') %}
		<a href="{{ path('app_product_new') }}" class="btn btn-primary">{{ 'product.new'|trans }}</a>
	{% endif %}
{% endblock %}
